<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ASIANG | Sistem Panel Nasabah Premium</title>

  <!-- Fonts & Icons -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800;900&family=Poppins:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: { 
            sans: ['Plus Jakarta Sans', 'sans-serif'],
            poppins: ['Poppins', 'sans-serif']
          },
          colors: {
            primary: '#2563eb',
            secondary: '#0ea5e9',
            success: '#10b981',
            danger: '#ef4444',
            warning: '#f59e0b',
            dark: '#0f172a',
            'dark-light': '#1e293b'
          },
          animation: {
            'slide-in': 'slideIn 0.3s ease-out',
            'fade-in': 'fadeIn 0.5s ease-out',
            'scale-in': 'scaleIn 0.3s ease-out',
            'float': 'float 3s ease-in-out infinite',
            'slide-down': 'slideDown 0.3s ease-out',
            'slide-up': 'slideUp 0.3s ease-out',
            'bounce-in': 'bounceIn 0.6s ease-out',
            'pulse-glow': 'pulseGlow 2s ease-in-out infinite',
            'notification-slide': 'notificationSlide 0.5s ease-out',
            'notification-hide': 'notificationHide 0.5s ease-out'
          },
          keyframes: {
            slideIn: {
              '0%': { transform: 'translateY(10px)', opacity: 0 },
              '100%': { transform: 'translateY(0)', opacity: 1 }
            },
            fadeIn: {
              '0%': { opacity: 0 },
              '100%': { opacity: 1 }
            },
            scaleIn: {
              '0%': { transform: 'scale(0.95)', opacity: 0 },
              '100%': { transform: 'scale(1)', opacity: 1 }
            },
            float: {
              '0%, 100%': { transform: 'translateY(0)' },
              '50%': { transform: 'translateY(-5px)' }
            },
            slideDown: {
              '0%': { transform: 'translateY(-20px)', opacity: 0 },
              '100%': { transform: 'translateY(0)', opacity: 1 }
            },
            slideUp: {
              '0%': { transform: 'translateY(20px)', opacity: 0 },
              '100%': { transform: 'translateY(0)', opacity: 1 }
            },
            bounceIn: {
              '0%': { transform: 'scale(0.3)', opacity: 0 },
              '50%': { transform: 'scale(1.05)', opacity: 1 },
              '70%': { transform: 'scale(0.9)', opacity: 1 },
              '100%': { transform: 'scale(1)', opacity: 1 }
            },
            pulseGlow: {
              '0%, 100%': { boxShadow: '0 0 20px rgba(16, 185, 129, 0.4)' },
              '50%': { boxShadow: '0 0 40px rgba(16, 185, 129, 0.7)' }
            },
            notificationSlide: {
              '0%': { transform: 'translateX(100%)', opacity: 0 },
              '100%': { transform: 'translateX(0)', opacity: 1 }
            },
            notificationHide: {
              '0%': { transform: 'translateX(0)', opacity: 1 },
              '100%': { transform: 'translateX(100%)', opacity: 0 }
            }
          }
        }
      }
    }
  </script>

  <style>
    /* Enhanced Styles */
    .glass-card {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .gradient-border {
      position: relative;
      border: 2px solid transparent;
      background: linear-gradient(white, white) padding-box,
                  linear-gradient(135deg, #2563eb, #0ea5e9) border-box;
    }
    
    .btn-glow {
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .btn-glow:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(37, 99, 235, 0.3);
    }
    
    .btn-glow:active {
      transform: translateY(0);
    }
    
    .input-enhanced {
      transition: all 0.2s ease;
      border: 2px solid #e2e8f0;
    }
    
    .input-enhanced:focus {
      border-color: #2563eb;
      box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.1);
      outline: none;
    }
    
    /* Smooth page transition */
    .page-enter {
      animation: slideIn 0.4s ease-out forwards;
    }
    
    /* Checkmark animation */
    .checkmark {
      animation: checkmark 0.5s ease-out;
    }
    
    @keyframes checkmark {
      0% { transform: scale(0); }
      50% { transform: scale(1.2); }
      100% { transform: scale(1); }
    }
    
    /* Pulse effect for important elements */
    .pulse-important {
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.8; }
    }
    
    /* Modal overlay blur */
    .modal-overlay {
      backdrop-filter: blur(8px);
    }
    
    /* Success package animation */
    .package-success {
      position: relative;
      overflow: hidden;
    }
    
    .package-success::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(16, 185, 129, 0.2), transparent);
      transition: left 0.6s;
    }
    
    .package-success:hover::before {
      left: 100%;
    }
    
    /* Notification badge */
    .notification-badge {
      position: absolute;
      top: -8px;
      right: -8px;
      min-width: 20px;
      height: 20px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      font-weight: bold;
      animation: pulseGlow 2s infinite;
    }
    
    /* Shimmer effect */
    .shimmer {
      background: linear-gradient(90deg, 
        rgba(255,255,255,0) 0%, 
        rgba(255,255,255,0.6) 50%, 
        rgba(255,255,255,0) 100%);
      background-size: 200% 100%;
      animation: shimmer 1.5s infinite;
    }
    
    @keyframes shimmer {
      0% { background-position: -200% 0; }
      100% { background-position: 200% 0; }
    }
    
    /* Floating notification system */
    .notification-system {
      position: fixed;
      top: 100px;
      right: 30px;
      z-index: 1000;
      display: flex;
      flex-direction: column;
      gap: 10px;
      max-width: 350px;
    }

    /* Wide modal for horizontal expansion */
    .modal-wide-content {
      max-width: 1400px;
      width: 95%;
    }

    .modal-wide-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 15px;
    }

    /* ===== STYLE SURAT YANG LEBIH ELEGAN ===== */
    .surat-container {
      font-family: 'Poppins', sans-serif;
      line-height: 1.8;
      color: #1a1a1a;
    }

    .kop-surat {
      border-bottom: 4px solid #1e40af;
      padding-bottom: 25px;
      margin-bottom: 40px;
      position: relative;
    }

    .kop-surat::after {
      content: '';
      position: absolute;
      bottom: -4px;
      left: 0;
      width: 100px;
      height: 4px;
      background: linear-gradient(90deg, #1e40af, #3b82f6);
    }

    .nama-perusahaan {
      font-size: 32px;
      font-weight: 800;
      color: #1e40af;
      letter-spacing: 1px;
      text-transform: uppercase;
      margin-bottom: 8px;
      background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .alamat-perusahaan {
      font-size: 14px;
      color: #4b5563;
      font-weight: 500;
      line-height: 1.6;
    }

    .judul-surat {
      font-size: 28px;
      font-weight: 700;
      text-align: center;
      margin: 40px 0;
      color: #1e40af;
      position: relative;
      padding-bottom: 15px;
    }

    .judul-surat::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 200px;
      height: 3px;
      background: linear-gradient(90deg, transparent, #1e40af, transparent);
    }

    .isi-surat {
      text-align: justify;
      font-size: 16px;
      color: #374151;
    }

    .data-nasabah-table {
      width: 100%;
      border-collapse: collapse;
      margin: 30px 0;
      background: #f8fafc;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    }

    .data-nasabah-table tr {
      border-bottom: 1px solid #e2e8f0;
    }

    .data-nasabah-table tr:last-child {
      border-bottom: none;
    }

    .data-nasabah-table td {
      padding: 16px 24px;
      vertical-align: top;
      font-size: 15px;
    }

    .data-nasabah-table .label {
      width: 35%;
      font-weight: 600;
      color: #1e40af;
      background: #f1f5f9;
    }

    .data-nasabah-table .value {
      font-weight: 500;
      color: #1f2937;
    }

    .ttd-section {
      margin-top: 100px;
      text-align: center;
    }

    .ttd-area {
      margin-top: 60px;
      display: inline-block;
      position: relative;
      padding: 0 40px;
    }

    .nama-ttd {
      font-weight: 700;
      margin-top: 100px;
      color: #1e40af;
      font-size: 16px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .jabatan-ttd {
      font-style: normal;
      color: #6b7280;
      font-weight: 500;
      font-size: 14px;
      margin-top: 5px;
    }

    .tanggal-surat {
      margin-top: 30px;
      font-weight: 600;
      color: #4b5563;
    }

    .garansi-note {
      background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
      border-left: 5px solid #0ea5e9;
      padding: 24px;
      margin: 30px 0;
      border-radius: 10px;
      font-style: italic;
      color: #0369a1;
      box-shadow: 0 4px 6px -1px rgba(14, 165, 233, 0.1);
    }

    .perjanjian-clause {
      background: #fef3c7;
      border-left: 5px solid #f59e0b;
      padding: 20px;
      margin: 25px 0;
      border-radius: 10px;
      color: #92400e;
    }

    .print-only {
      display: none;
    }

    /* Styling khusus untuk header surat */
    .header-surat {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-bottom: 25px;
      border-bottom: 2px solid #e5e7eb;
      margin-bottom: 40px;
    }

    .nomor-surat {
      font-size: 14px;
      color: #6b7280;
      font-weight: 500;
    }

    /* Border untuk konten surat */
    .border-surat {
      border: 2px solid #e5e7eb;
      border-radius: 16px;
      padding: 40px;
      background: white;
      box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.05);
    }

    /* Tanda tangan garis */
    .garis-ttd {
      width: 250px;
      height: 1px;
      background: #4b5563;
      margin: 80px auto 10px;
    }

    @media print {
      .no-print {
        display: none !important;
      }
      .print-only {
        display: block !important;
      }
      .surat-modal {
        width: 100% !important;
        max-width: 100% !important;
        margin: 0 !important;
        padding: 0 !important;
      }
      .surat-content {
        box-shadow: none !important;
        border: none !important;
        padding: 20px !important;
      }
      .border-surat {
        border: none !important;
        padding: 0 !important;
        box-shadow: none !important;
      }
    }
  </style>
</head>

<body class="bg-gradient-to-br from-slate-50 to-blue-50 font-sans text-slate-800 min-h-screen">
  
  <!-- Notification System -->
  <div class="notification-system" id="notificationSystem">
    <!-- Notifications will be added here dynamically -->
  </div>

  <!-- Main Container -->
  <div class="flex min-h-screen">
    
    <!-- ===== SIDEBAR ===== -->
    <aside class="w-72 bg-gradient-to-b from-dark to-dark-light text-white p-8 sticky top-0 h-screen overflow-y-auto">
      <div class="mb-12">
        <div class="flex items-center gap-4 mb-8">
          <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-primary to-secondary flex items-center justify-center shadow-lg">
            <i class="ri-shield-star-line text-white text-xl"></i>
          </div>
          <div>
            <h1 class="text-2xl font-bold">Asiang Panel</h1>
            <p class="text-slate-400 text-sm">Sistem Management Nasabah</p>
          </div>
        </div>
        
        <div class="glass-card rounded-xl p-4 mb-8">
          <div class="flex items-center justify-between mb-3">
            <span class="text-sm text-slate-400">Status Sistem</span>
            <div class="flex items-center gap-2">
              <div class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></div>
              <span class="text-sm font-semibold text-emerald-400">Online</span>
            </div>
          </div>
          <div class="flex items-center justify-between">
            <span class="text-sm text-slate-400">Waktu Server</span>
            <span id="systemClock" class="font-mono font-bold">--:--:--</span>
          </div>
        </div>
      </div>
      
      <nav class="space-y-3">
        <h3 class="text-xs uppercase tracking-wider text-slate-500 font-bold mb-6">Menu Utama</h3>
        
        <!-- Penguncian Paket Button -->
        <button id="navLock" class="w-full text-left p-5 rounded-xl bg-gradient-to-r from-dark-light to-dark hover:from-emerald-900/40 hover:to-emerald-800/40 border border-slate-700 hover:border-emerald-500/30 transition-all duration-300 flex items-center gap-4 btn-glow group">
          <div class="relative">
            <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-emerald-600 to-emerald-800 flex items-center justify-center group-hover:scale-110 transition-transform duration-300">
              <i class="ri-lock-line text-white text-lg"></i>
            </div>
            <div class="absolute -top-1 -right-1 w-5 h-5 bg-emerald-500 rounded-full flex items-center justify-center">
              <i class="ri-check-line text-xs text-white"></i>
            </div>
          </div>
          <div class="flex-1">
            <p class="font-semibold text-white">Penguncian Paket</p>
            <p class="text-xs text-slate-400 group-hover:text-emerald-300">Input data nasabah</p>
          </div>
          <i class="ri-arrow-right-s-line text-slate-500 group-hover:text-emerald-400 text-xl transition-all"></i>
        </button>
        
        <!-- Garansi Ditolak Button -->
        <button id="navReject" class="w-full text-left p-5 rounded-xl bg-gradient-to-r from-dark-light to-dark hover:from-rose-900/40 hover:to-rose-800/40 border border-slate-700 hover:border-rose-500/30 transition-all duration-300 flex items-center gap-4 btn-glow group">
          <div class="relative">
            <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-rose-600 to-rose-800 flex items-center justify-center group-hover:scale-110 transition-transform duration-300">
              <i class="ri-close-circle-line text-white text-lg"></i>
            </div>
            <div class="absolute -top-1 -right-1 w-5 h-5 bg-rose-500 rounded-full flex items-center justify-center">
              <i class="ri-close-line text-xs text-white"></i>
            </div>
          </div>
          <div class="flex-1">
            <p class="font-semibold text-white">Garansi Ditolak</p>
            <p class="text-xs text-slate-400 group-hover:text-rose-300">Status penolakan</p>
          </div>
          <i class="ri-arrow-right-s-line text-slate-500 group-hover:text-rose-400 text-xl transition-all"></i>
        </button>

        <!-- ===== TAMBAHAN FITUR BARU ===== -->
        
        <!-- Pengajuan Pinjaman Button -->
        <button id="navLoan" class="w-full text-left p-5 rounded-xl bg-gradient-to-r from-dark-light to-dark hover:from-blue-900/40 hover:to-blue-800/40 border border-slate-700 hover:border-blue-500/30 transition-all duration-300 flex items-center gap-4 btn-glow group">
          <div class="relative">
            <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-blue-600 to-blue-800 flex items-center justify-center group-hover:scale-110 transition-transform duration-300">
              <i class="ri-bank-card-line text-white text-lg"></i>
            </div>
            <div class="absolute -top-1 -right-1 w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center">
              <i class="ri-file-text-line text-xs text-white"></i>
            </div>
          </div>
          <div class="flex-1">
            <p class="font-semibold text-white">Pengajuan Pinjaman</p>
            <p class="text-xs text-slate-400 group-hover:text-blue-300">Surat pernyataan pinjaman</p>
          </div>
          <i class="ri-arrow-right-s-line text-slate-500 group-hover:text-blue-400 text-xl transition-all"></i>
        </button>

        <!-- Surat Perjanjian Penarikan Button -->
        <button id="navWithdrawal" class="w-full text-left p-5 rounded-xl bg-gradient-to-r from-dark-light to-dark hover:from-purple-900/40 hover:to-purple-800/40 border border-slate-700 hover:border-purple-500/30 transition-all duration-300 flex items-center gap-4 btn-glow group">
          <div class="relative">
            <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-purple-600 to-purple-800 flex items-center justify-center group-hover:scale-110 transition-transform duration-300">
              <i class="ri-contract-line text-white text-lg"></i>
            </div>
            <div class="absolute -top-1 -right-1 w-5 h-5 bg-purple-500 rounded-full flex items-center justify-center">
              <i class="ri-handshake-line text-xs text-white"></i>
            </div>
          </div>
          <div class="flex-1">
            <p class="font-semibold text-white">Perjanjian Penarikan</p>
            <p class="text-xs text-slate-400 group-hover:text-purple-300">Surat perjanjian legal</p>
          </div>
          <i class="ri-arrow-right-s-line text-slate-500 group-hover:text-purple-400 text-xl transition-all"></i>
        </button>
      </nav>
      
      <!-- Quick Stats -->
      <div class="mt-12 pt-8 border-t border-slate-800">
        <h3 class="text-xs uppercase tracking-wider text-slate-500 font-bold mb-4">Statistik Cepat</h3>
        <div class="space-y-3">
          <div class="flex justify-between items-center">
            <span class="text-sm text-slate-300">Paket Terkunci</span>
            <span class="font-bold text-emerald-400">896</span>
          </div>
          <div class="flex justify-between items-center">
            <span class="text-sm text-slate-300">Garansi Ditolak</span>
            <span class="font-bold text-rose-400">214</span>
          </div>
          <div class="flex justify-between items-center">
            <span class="text-sm text-slate-300">Surat Pinjaman</span>
            <span class="font-bold text-blue-400">342</span>
          </div>
          <div class="flex justify-between items-center">
            <span class="text-sm text-slate-300">Perjanjian</span>
            <span class="font-bold text-purple-400">128</span>
          </div>
          <div class="flex justify-between items-center">
            <span class="text-sm text-slate-300">Total Nasabah</span>
            <span class="font-bold">1,842</span>
          </div>
        </div>
      </div>
    </aside>

    <!-- ===== MAIN CONTENT ===== -->
    <main class="flex-1 p-8 overflow-y-auto">
      
      <!-- Header -->
      <div class="mb-10 animate-fade-in">
        <div class="flex items-center justify-between mb-6">
          <div>
            <h1 class="text-4xl font-bold text-slate-900 mb-2">Sistem Panel Nasabah Premium</h1>
            <p class="text-slate-600">Advanced customer management platform</p>
          </div>
          <div class="flex items-center gap-4">
            <div class="px-5 py-2.5 bg-gradient-to-r from-primary to-secondary text-white rounded-xl font-semibold flex items-center gap-2 shadow-lg">
              <i class="ri-shield-check-line"></i>
              Sistem Terproteksi
            </div>
            <div class="text-right">
              <p class="text-sm text-slate-500">Waktu Real-time</p>
              <p id="liveClock" class="font-mono font-bold text-2xl text-slate-800">--:--:--</p>
            </div>
          </div>
        </div>
        
        <!-- Stats Cards -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-12">
          <div class="bg-white rounded-2xl p-6 shadow-xl border border-slate-200 animate-scale-in hover:shadow-2xl transition-shadow duration-300">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm text-slate-500 font-semibold mb-2">Total Nasabah</p>
                <h3 class="text-3xl font-bold text-slate-900">1,842</h3>
              </div>
              <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-blue-100 to-blue-200 flex items-center justify-center">
                <i class="ri-user-3-fill text-blue-600 text-xl"></i>
              </div>
            </div>
            <div class="mt-4 flex items-center gap-2 text-sm">
              <i class="ri-arrow-up-line text-emerald-500"></i>
              <span class="text-emerald-600 font-semibold">+12% aktif</span>
            </div>
          </div>
          
          <div class="bg-white rounded-2xl p-6 shadow-xl border border-slate-200 animate-scale-in hover:shadow-2xl transition-shadow duration-300" style="animation-delay: 0.1s">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm text-slate-500 font-semibold mb-2">Paket Terkunci</p>
                <h3 class="text-3xl font-bold text-slate-900">896</h3>
              </div>
              <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-emerald-100 to-emerald-200 flex items-center justify-center">
                <i class="ri-lock-fill text-emerald-600 text-xl"></i>
              </div>
            </div>
            <div class="mt-4 flex items-center gap-2 text-sm">
              <i class="ri-shield-check-line text-blue-500"></i>
              <span class="text-blue-600 font-semibold">Proteksi aktif</span>
            </div>
          </div>
          
          <div class="bg-white rounded-2xl p-6 shadow-xl border border-slate-200 animate-scale-in hover:shadow-2xl transition-shadow duration-300" style="animation-delay: 0.2s">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm text-slate-500 font-semibold mb-2">Garansi Ditolak</p>
                <h3 class="text-3xl font-bold text-slate-900">214</h3>
              </div>
              <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-rose-100 to-rose-200 flex items-center justify-center">
                <i class="ri-close-circle-fill text-rose-600 text-xl"></i>
              </div>
            </div>
            <div class="mt-4 flex items-center gap-2 text-sm">
              <i class="ri-alert-line text-amber-500"></i>
              <span class="text-amber-600 font-semibold">Perlu penyesuaian</span>
            </div>
          </div>

          <div class="bg-white rounded-2xl p-6 shadow-xl border border-slate-200 animate-scale-in hover:shadow-2xl transition-shadow duration-300" style="animation-delay: 0.3s">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm text-slate-500 font-semibold mb-2">Pinjaman</p>
                <h3 class="text-3xl font-bold text-slate-900">342</h3>
              </div>
              <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-blue-100 to-blue-200 flex items-center justify-center">
                <i class="ri-bank-card-fill text-blue-600 text-xl"></i>
              </div>
            </div>
            <div class="mt-4 flex items-center gap-2 text-sm">
              <i class="ri-file-text-line text-blue-500"></i>
              <span class="text-blue-600 font-semibold">Surat aktif</span>
            </div>
          </div>
          
          <div class="bg-white rounded-2xl p-6 shadow-xl border border-slate-200 animate-scale-in hover:shadow-2xl transition-shadow duration-300" style="animation-delay: 0.4s">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm text-slate-500 font-semibold mb-2">Status Sistem</p>
                <h3 class="text-3xl font-bold text-emerald-600">100%</h3>
              </div>
              <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-slate-100 to-slate-200 flex items-center justify-center">
                <i class="ri-server-fill text-slate-600 text-xl"></i>
              </div>
            </div>
            <div class="mt-4 flex items-center gap-2 text-sm">
              <i class="ri-wifi-line text-emerald-500"></i>
              <span class="text-emerald-600 font-semibold">Semua sistem operasional</span>
            </div>
          </div>
        </div>
      </div>

      <!-- ===== FORM PENGUNCIAN PAKET ===== -->
      <section id="sectionLock" class="page-enter">
        <!-- Kode form penguncian paket yang sudah ada -->
        <!-- Karena panjang, saya potong untuk fokus pada perbaikan error -->
        <div class="bg-white rounded-3xl shadow-2xl overflow-hidden mb-12 border border-slate-200">
          <!-- Form Header -->
          <div class="bg-gradient-to-r from-emerald-600 to-emerald-700 p-8 text-white">
            <div class="flex items-center justify-between">
              <div class="flex items-center gap-4">
                <div class="w-16 h-16 rounded-2xl bg-white/20 backdrop-blur-sm flex items-center justify-center">
                  <i class="ri-lock-2-line text-2xl"></i>
                </div>
                <div>
                  <h2 class="text-2xl font-bold">Penguncian Paket</h2>
                  <p class="text-emerald-100">Input data nasabah untuk penguncian paket trading</p>
                </div>
              </div>
              <div class="flex items-center gap-3">
                <div class="px-4 py-2 bg-white/20 backdrop-blur-sm rounded-xl text-sm font-semibold">
                  <i class="ri-shield-star-line mr-2"></i>Form Terproteksi
                </div>
              </div>
            </div>
          </div>
          
          <!-- Form Content -->
          <div class="p-8">
            <div class="grid lg:grid-cols-2 gap-8">
              <!-- Left Column -->
              <div class="space-y-6">
                <!-- Email Nasabah -->
                <div class="group">
                  <label class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-2">
                    <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center">
                      <i class="ri-mail-line text-white text-sm"></i>
                    </div>
                    <span>Email Nasabah <span class="text-rose-500">*</span></span>
                  </label>
                  <input 
                    type="email" 
                    id="lockEmail"
                    class="input-enhanced w-full p-4 rounded-xl"
                    placeholder="nasabah@domain.com"
                    required
                  >
                  <p class="text-xs text-slate-500 mt-2">Masukkan email nasabah yang terdaftar</p>
                </div>
                
                <!-- Jenis Paket -->
                <div class="group">
                  <label class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-2">
                    <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center">
                      <i class="ri-package-line text-white text-sm"></i>
                    </div>
                    <span>Jenis Paket <span class="text-rose-500">*</span></span>
                  </label>
                  <select id="lockPaket" class="input-enhanced w-full p-4 rounded-xl appearance-none">
                    <option value="">Pilih Jenis Paket</option>
                    <option>Paket Trading Pertama</option>
                    <option>Paket Trading Kedua</option>
                    <option>Paket Trading Ketiga</option>
                    <option>Paket Trading Keempat</option>
                    <option>Paket Trading Pagi</option>
                    <option>Paket Trading Siang</option>
                    <option>Paket Trading Sore</option>
                    <option>Paket Trading Exclusive</option>
                    <option>Extra Dividen Paket 1</option>
                    <option>Extra Dividen Paket 2</option>
                    <option>Extra Dividen Paket 3</option>
                    <option>Extra Dividen</option>
                    <option>Extra Dividen Penarikan</option>
                    <option>Paket Trading Promo</option>
                    <option>Paket Trading Perbaikan</option>
                    <option>Paket Trading Validasi</option>
                    <option>Paket Trading Express</option>
                    <option>Paket Trading VIP</option>
                  </select>
                </div>
                
                <!-- Tahapan Paket -->
                <div class="group">
                  <label class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-2">
                    <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-amber-500 to-amber-600 flex items-center justify-center">
                      <i class="ri-list-ordered text-white text-sm"></i>
                    </div>
                    <span>Tahapan Paket <span class="text-rose-500">*</span></span>
                  </label>
                  <select id="lockTahap" class="input-enhanced w-full p-4 rounded-xl appearance-none">
                    <option value="">Pilih Tahapan</option>
                    <option>Paket 1</option>
                    <option>Paket 2</option>
                    <option>Paket 3</option>
                    <option>Paket 4</option>
                    <option>Paket 5</option>
                    <option>Penarikan</option>
                    <option>Akhir</option>
                  </select>
                </div>
              </div>
              
              <!-- Right Column -->
              <div class="space-y-6">
                <!-- Modal Trading -->
                <div class="group">
                  <label class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-2">
                    <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-emerald-500 to-emerald-600 flex items-center justify-center">
                      <i class="ri-money-dollar-circle-line text-white text-sm"></i>
                    </div>
                    <span>Modal Trading (Rp) <span class="text-rose-500">*</span></span>
                  </label>
                  <div class="relative">
                    <input 
                      type="text" 
                      id="lockModal"
                      class="input-enhanced w-full p-4 rounded-xl pl-12"
                      placeholder="10.000.000"
                      oninput="formatCurrency(this)"
                    >
                    <div class="absolute left-4 top-4">
                      <span class="font-semibold text-slate-700">Rp</span>
                    </div>
                    <button 
                      type="button"
                      onclick="formatCurrency(document.getElementById('lockModal'))"
                      class="absolute right-4 top-4 text-primary hover:text-blue-700"
                      title="Format angka"
                    >
                      <i class="ri-refresh-line"></i>
                    </button>
                  </div>
                </div>
                
                <!-- Profit Persentase -->
                <div class="group">
                  <label class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-2">
                    <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-cyan-500 to-cyan-600 flex items-center justify-center">
                      <i class="ri-line-chart-line text-white text-sm"></i>
                    </div>
                    <span>Profit (%) <span class="text-rose-500">*</span></span>
                  </label>
                  <div class="relative">
                    <input 
                      type="number" 
                      id="lockProfit"
                      class="input-enhanced w-full p-4 rounded-xl"
                      placeholder="15"
                      min="0"
                      max="100"
                      step="0.1"
                    >
                    <div class="absolute right-4 top-4">
                      <span class="font-semibold text-slate-700">%</span>
                    </div>
                  </div>
                </div>
                
                <!-- Hasil Perhitungan -->
                <div class="group">
                  <label class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-2">
                    <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-slate-700 to-slate-900 flex items-center justify-center">
                      <i class="ri-calculator-line text-white text-sm"></i>
                    </div>
                    <span>Hasil Perhitungan</span>
                  </label>
                  <div class="relative">
                    <input 
                      type="text" 
                      id="lockHasil"
                      class="input-enhanced w-full p-4 rounded-xl bg-slate-50 font-bold text-slate-900 pr-24"
                      readonly
                    >
                    <div class="absolute right-4 top-4 flex items-center gap-3">
                      <button 
                        id="btnCopyLock"
                        class="text-primary hover:text-blue-700"
                        title="Copy hasil"
                      >
                        <i class="ri-clipboard-line"></i>
                      </button>
                      <span class="font-semibold text-slate-700">IDR</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Catatan Manual -->
            <div class="mt-8">
              <label class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-2">
                <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-slate-600 to-slate-800 flex items-center justify-center">
                  <i class="ri-sticky-note-line text-white text-sm"></i>
                </div>
                <span>Catatan Manual (Opsional)</span>
              </label>
              <textarea 
                id="lockNote"
                rows="3" 
                class="input-enhanced w-full p-4 rounded-xl"
                placeholder="Tulis catatan khusus untuk nasabah..."
                maxlength="500"
              ></textarea>
              <div class="flex justify-between text-xs text-slate-500 mt-2">
                <span>Catatan aktif dan akan ditampilkan di sistem</span>
                <span id="charCountLock">0/500</span>
              </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="mt-12 flex flex-wrap gap-6">
              <button 
                id="btnProcessLock"
                class="px-10 py-4 bg-gradient-to-r from-emerald-600 to-emerald-700 text-white rounded-2xl font-semibold text-lg flex items-center gap-3 btn-glow"
              >
                <i class="ri-lock-line"></i>
                Proses Penguncian Paket
                <i class="ri-arrow-right-line"></i>
              </button>
              
              <button 
                id="btnCalculate"
                class="px-8 py-4 bg-gradient-to-r from-primary to-secondary text-white rounded-2xl font-semibold flex items-center gap-3 btn-glow"
              >
                <i class="ri-calculator-line"></i>
                Hitung Otomatis
              </button>
              
              <button 
                id="btnResetLock"
                class="px-8 py-4 bg-gradient-to-r from-slate-200 to-slate-300 text-slate-800 rounded-2xl font-semibold flex items-center gap-3 btn-glow"
              >
                <i class="ri-refresh-line"></i>
                Reset Form
              </button>
            </div>
          </div>
        </div>
      </section>
      
      <!-- ===== FORM GARANSI DITOLAK ===== -->
      <section id="sectionReject" class="page-enter hidden">
        <!-- Kode form garansi ditolak yang sudah ada -->
        <div class="bg-white rounded-3xl shadow-2xl overflow-hidden mb-12 border border-slate-200">
          <!-- Form Header -->
          <div class="bg-gradient-to-r from-rose-600 to-rose-700 p-8 text-white">
            <div class="flex items-center justify-between">
              <div class="flex items-center gap-4">
                <div class="w-16 h-16 rounded-2xl bg-white/20 backdrop-blur-sm flex items-center justify-center">
                  <i class="ri-shield-cross-line text-2xl"></i>
                </div>
                <div>
                  <h2 class="text-2xl font-bold">Garansi Ditolak</h2>
                  <p class="text-rose-100">Input data penolakan dan alternatif paket</p>
                </div>
              </div>
              <div class="flex items-center gap-3">
                <div class="px-4 py-2 bg-white/20 backdrop-blur-sm rounded-xl text-sm font-semibold">
                  <i class="ri-alert-line mr-2"></i>Review Diperlukan
                </div>
              </div>
            </div>
          </div>
          
          <!-- Form Content -->
          <div class="p-8">
            <div class="grid lg:grid-cols-2 gap-8">
              <!-- Left Column -->
              <div class="space-y-6">
                <!-- Email Nasabah -->
                <div class="group">
                  <label class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-2">
                    <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center">
                      <i class="ri-mail-line text-white text-sm"></i>
                    </div>
                    <span>Email Nasabah <span class="text-rose-500">*</span></span>
                  </label>
                  <input 
                    type="email" 
                    id="rejectEmail"
                    class="input-enhanced w-full p-4 rounded-xl"
                    placeholder="nasabah@domain.com"
                    required
                  >
                  <p class="text-xs text-slate-500 mt-2">Email nasabah yang mengajukan garansi</p>
                </div>
                
                <!-- Paket yang Diajukan -->
                <div class="group">
                  <label class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-2">
                    <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-rose-500 to-rose-600 flex items-center justify-center">
                      <i class="ri-close-circle-line text-white text-sm"></i>
                    </div>
                    <span>Paket yang Diajukan <span class="text-rose-500">*</span></span>
                  </label>
                  <select id="rejectPaket" class="input-enhanced w-full p-4 rounded-xl appearance-none">
                    <option value="">Pilih Paket Diajukan</option>
                    <option>Paket Trading Pertama</option>
                    <option>Paket Trading Kedua</option>
                    <option>Paket Trading Ketiga</option>
                    <option>Paket Trading Keempat</option>
                    <option>Paket Trading Pagi</option>
                    <option>Paket Trading Siang</option>
                    <option>Paket Trading Sore</option>
                    <option>Paket Trading Exclusive</option>
                    <option>Extra Dividen Paket 1</option>
                    <option>Extra Dividen Paket 2</option>
                    <option>Extra Dividen Paket 3</option>
                    <option>Extra Dividen</option>
                    <option>Extra Dividen Penarikan</option>
                    <option>Paket Trading Promo</option>
                    <option>Paket Trading Perbaikan</option>
                    <option>Paket Trading Validasi</option>
                    <option>Paket Trading Express</option>
                    <option>Paket Trading VIP</option>
                  </select>
                </div>
                
                <!-- Modal Diajukan -->
                <div class="group">
                  <label class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-2">
                    <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-emerald-500 to-emerald-600 flex items-center justify-center">
                      <i class="ri-money-dollar-circle-line text-white text-sm"></i>
                    </div>
                    <span>Modal Diajukan (Rp) <span class="text-rose-500">*</span></span>
                  </label>
                  <div class="relative">
                    <input 
                      type="text" 
                      id="rejectModal"
                      class="input-enhanced w-full p-4 rounded-xl pl-12"
                      placeholder="10.000.000"
                      oninput="formatCurrency(this)"
                    >
                    <div class="absolute left-4 top-4">
                      <span class="font-semibold text-slate-700">Rp</span>
                    </div>
                  </div>
                </div>
              </div>
              
              <!-- Right Column -->
              <div class="space-y-6">
                <!-- Paket Tersedia 1 (Wajib) -->
                <div class="group">
                  <label class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-2">
                    <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-emerald-500 to-emerald-600 flex items-center justify-center">
                      <i class="ri-checkbox-circle-line text-white text-sm"></i>
                    </div>
                    <span>Paket Tersedia 1 <span class="text-rose-500">*</span></span>
                  </label>
                  <select id="rejectTahap1" class="input-enhanced w-full p-4 rounded-xl appearance-none">
                    <option value="">Pilih Paket Tersedia</option>
                    <option>Paket 1</option>
                    <option>Paket 2</option>
                    <option>Paket 3</option>
                    <option>Paket 4</option>
                    <option>Paket 5</option>
                  </select>
                  <p class="text-xs text-slate-500 mt-2">Pilih paket tersedia yang masih tersedia dalam sistem</p>
                </div>
                
                <!-- Paket Tersedia 2 (Opsional) -->
                <div class="group">
                  <label class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-2">
                    <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-emerald-500 to-emerald-600 flex items-center justify-center">
                      <i class="ri-checkbox-circle-line text-white text-sm"></i>
                    </div>
                    <span>Paket Tersedia 2 (Opsional)</span>
                  </label>
                  <select id="rejectTahap2" class="input-enhanced w-full p-4 rounded-xl appearance-none">
                    <option value="">Pilih Paket Tersedia Lainnya</option>
                    <option>Paket 1</option>
                    <option>Paket 2</option>
                    <option>Paket 3</option>
                    <option>Paket 4</option>
                    <option>Paket 5</option>
                  </select>
                  <p class="text-xs text-slate-500 mt-2">Opsional: Pilih paket tersedia tambahan</p>
                </div>
                
                <!-- Paket Alternatif -->
                <div class="group">
                  <label class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-2">
                    <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-cyan-500 to-cyan-600 flex items-center justify-center">
                      <i class="ri-arrow-right-circle-line text-white text-sm"></i>
                    </div>
                    <span>Paket Alternatif (Opsional)</span>
                  </label>
                  <select id="rejectAlt1" class="input-enhanced w-full p-4 rounded-xl appearance-none">
                    <option value="">Pilih Paket Alternatif</option>
                    <option>Paket 1</option>
                    <option>Paket 2</option>
                    <option>Paket 3</option>
                    <option>Paket 4</option>
                    <option>Paket 5</option>
                  </select>
                  <p class="text-xs text-slate-500 mt-2">Opsional: Pilih paket alternatif rekomendasi</p>
                </div>
              </div>
            </div>
            
            <!-- Catatan Penolakan -->
            <div class="mt-8">
              <label class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-2">
                <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-slate-600 to-slate-800 flex items-center justify-center">
                  <i class="ri-alert-line text-white text-sm"></i>
                </div>
                <span>Catatan Penolakan (Opsional)</span>
              </label>
              <textarea 
                id="rejectNote"
                rows="3" 
                class="input-enhanced w-full p-4 rounded-xl"
                placeholder="Alasan penolakan dan rekomendasi..."
                maxlength="500"
              ></textarea>
              <div class="flex justify-between text-xs text-slate-500 mt-2">
                <span>Catatan aktif dan akan dikirim ke nasabah</span>
                <span id="charCountReject">0/500</span>
              </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="mt-12 flex flex-wrap gap-6">
              <button 
                id="btnProcessReject"
                class="px-10 py-4 bg-gradient-to-r from-rose-600 to-rose-700 text-white rounded-2xl font-semibold text-lg flex items-center gap-3 btn-glow"
              >
                <i class="ri-close-circle-line"></i>
                Proses Garansi Ditolak
                <i class="ri-arrow-right-line"></i>
              </button>
              
              <button 
                id="btnPreviewReject"
                class="px-8 py-4 bg-gradient-to-r from-slate-600 to-slate-800 text-white rounded-2xl font-semibold flex items-center gap-3 btn-glow"
              >
                <i class="ri-eye-line mr-2"></i>
                Preview Surat
              </button>
              
              <button 
                id="btnResetReject"
                class="px-8 py-4 bg-gradient-to-r from-slate-200 to-slate-300 text-slate-800 rounded-2xl font-semibold flex items-center gap-3 btn-glow"
              >
                <i class="ri-refresh-line mr-2"></i>
                Reset Form
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- ===== FORM PENGJUAN PINJAMAN ===== -->
      <section id="sectionLoan" class="page-enter hidden">
        <div class="bg-white rounded-3xl shadow-2xl overflow-hidden mb-12 border border-slate-200">
          <!-- Form Header -->
          <div class="bg-gradient-to-r from-blue-600 to-blue-700 p-8 text-white">
            <div class="flex items-center justify-between">
              <div class="flex items-center gap-4">
                <div class="w-16 h-16 rounded-2xl bg-white/20 backdrop-blur-sm flex items-center justify-center">
                  <i class="ri-bank-card-2-line text-2xl"></i>
                </div>
                <div>
                  <h2 class="text-2xl font-bold">Pengajuan Pinjaman</h2>
                  <p class="text-blue-100">Buat surat pernyataan pinjaman nasabah</p>
                </div>
              </div>
              <div class="flex items-center gap-3">
                <div class="px-4 py-2 bg-white/20 backdrop-blur-sm rounded-xl text-sm font-semibold">
                  <i class="ri-file-text-line mr-2"></i>Dokumen Legal
                </div>
              </div>
            </div>
          </div>
          
          <!-- Form Content -->
          <div class="p-8">
            <div class="grid lg:grid-cols-2 gap-8">
              <!-- Left Column -->
              <div class="space-y-6">
                <!-- Nama Nasabah -->
                <div class="group">
                  <label class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-2">
                    <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center">
                      <i class="ri-user-line text-white text-sm"></i>
                    </div>
                    <span>Nama Lengkap <span class="text-rose-500">*</span></span>
                  </label>
                  <input 
                    type="text" 
                    id="loanNama"
                    class="input-enhanced w-full p-4 rounded-xl"
                    placeholder="Nama lengkap nasabah"
                    required
                  >
                </div>
                
                <!-- Alamat -->
                <div class="group">
                  <label class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-2">
                    <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-emerald-500 to-emerald-600 flex items-center justify-center">
                      <i class="ri-home-4-line text-white text-sm"></i>
                    </div>
                    <span>Alamat Lengkap <span class="text-rose-500">*</span></span>
                  </label>
                  <textarea 
                    id="loanAlamat"
                    rows="3" 
                    class="input-enhanced w-full p-4 rounded-xl"
                    placeholder="Alamat lengkap nasabah"
                    required
                  ></textarea>
                </div>
                
                <!-- NIK -->
                <div class="group">
                  <label class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-2">
                    <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center">
                      <i class="ri-id-card-line text-white text-sm"></i>
                    </div>
                    <span>NIK (Nomor Induk Kependudukan) <span class="text-rose-500">*</span></span>
                  </label>
                  <input 
                    type="text" 
                    id="loanNik"
                    class="input-enhanced w-full p-4 rounded-xl"
                    placeholder="16 digit NIK"
                    required
                  >
                </div>
              </div>
              
              <!-- Right Column -->
              <div class="space-y-6">
                <!-- Nama Akun -->
                <div class="group">
                  <label class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-2">
                    <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-amber-500 to-amber-600 flex items-center justify-center">
                      <i class="ri-account-circle-line text-white text-sm"></i>
                    </div>
                    <span>Nama Akun Trading <span class="text-rose-500">*</span></span>
                  </label>
                  <input 
                    type="text" 
                    id="loanAkun"
                    class="input-enhanced w-full p-4 rounded-xl"
                    placeholder="Username akun trading"
                    required
                  >
                </div>
                
                <!-- Jumlah Pinjaman -->
                <div class="group">
                  <label class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-2">
                    <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-emerald-500 to-emerald-600 flex items-center justify-center">
                      <i class="ri-money-dollar-circle-line text-white text-sm"></i>
                    </div>
                    <span>Jumlah Pinjaman (Rp) <span class="text-rose-500">*</span></span>
                  </label>
                  <div class="relative">
                    <input 
                      type="text" 
                      id="loanJumlah"
                      class="input-enhanced w-full p-4 rounded-xl pl-12"
                      placeholder="10.000.000"
                      oninput="formatCurrency(this)"
                      required
                    >
                    <div class="absolute left-4 top-4">
                      <span class="font-semibold text-slate-700">Rp</span>
                    </div>
                  </div>
                </div>
                
                <!-- Pelunasan -->
                <div class="group">
                  <label class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-2">
                    <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-cyan-500 to-cyan-600 flex items-center justify-center">
                      <i class="ri-calendar-check-line text-white text-sm"></i>
                    </div>
                    <span>Pelunasan Setelah <span class="text-rose-500">*</span></span>
                  </label>
                  <input 
                    type="text" 
                    id="loanPelunasan"
                    class="input-enhanced w-full p-4 rounded-xl"
                    placeholder="Selesai sesi trading"
                    value="Selesai sesi trading"
                    required
                  >
                </div>
              </div>
            </div>
            
            <!-- Catatan Khusus -->
            <div class="mt-8">
              <label class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-2">
                <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-slate-600 to-slate-800 flex items-center justify-center">
                  <i class="ri-sticky-note-line text-white text-sm"></i>
                </div>
                <span>Catatan Khusus (Opsional)</span>
              </label>
              <textarea 
                id="loanCatatan"
                rows="3" 
                class="input-enhanced w-full p-4 rounded-xl"
                placeholder="Tulis catatan khusus untuk surat..."
                maxlength="500"
              ></textarea>
              <div class="flex justify-between text-xs text-slate-500 mt-2">
                <span>Jika kosong akan menggunakan catatan default</span>
                <span id="charCountLoan">0/500</span>
              </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="mt-12 flex flex-wrap gap-6">
              <button 
                id="btnProcessLoan"
                class="px-10 py-4 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-2xl font-semibold text-lg flex items-center gap-3 btn-glow"
              >
                <i class="ri-file-text-line"></i>
                Buat Surat Pinjaman
                <i class="ri-arrow-right-line"></i>
              </button>
              
              <button 
                id="btnPreviewLoan"
                class="px-8 py-4 bg-gradient-to-r from-slate-600 to-slate-800 text-white rounded-2xl font-semibold flex items-center gap-3 btn-glow"
              >
                <i class="ri-eye-line mr-2"></i>
                Preview Surat
              </button>
              
              <button 
                id="btnResetLoan"
                class="px-8 py-4 bg-gradient-to-r from-slate-200 to-slate-300 text-slate-800 rounded-2xl font-semibold flex items-center gap-3 btn-glow"
              >
                <i class="ri-refresh-line mr-2"></i>
                Reset Form
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- ===== FORM SURAT PERJANJIAN PENARIKAN ===== -->
      <section id="sectionWithdrawal" class="page-enter hidden">
        <div class="bg-white rounded-3xl shadow-2xl overflow-hidden mb-12 border border-slate-200">
          <!-- Form Header -->
          <div class="bg-gradient-to-r from-purple-600 to-purple-700 p-8 text-white">
            <div class="flex items-center justify-between">
              <div class="flex items-center gap-4">
                <div class="w-16 h-16 rounded-2xl bg-white/20 backdrop-blur-sm flex items-center justify-center">
                  <i class="ri-contract-line text-2xl"></i>
                </div>
                <div>
                  <h2 class="text-2xl font-bold">Surat Perjanjian Penarikan</h2>
                  <p class="text-purple-100">Buat perjanjian penarikan dana nasabah</p>
                </div>
              </div>
              <div class="flex items-center gap-3">
                <div class="px-4 py-2 bg-white/20 backdrop-blur-sm rounded-xl text-sm font-semibold">
                  <i class="ri-scales-3-line mr-2"></i>Dokumen Hukum
                </div>
              </div>
            </div>
          </div>
          
          <!-- Form Content -->
          <div class="p-8">
            <div class="grid lg:grid-cols-2 gap-8">
              <!-- Pihak Pertama (Nasabah) -->
              <div class="space-y-6">
                <div class="bg-gradient-to-r from-blue-50 to-cyan-50 rounded-2xl p-6 border border-blue-200">
                  <div class="flex items-center gap-3 mb-6">
                    <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center">
                      <i class="ri-user-line text-white text-sm"></i>
                    </div>
                    <div>
                      <h3 class="font-bold text-blue-900">Pihak Pertama (Nasabah)</h3>
                      <p class="text-xs text-blue-600">Data nasabah pemilik dana</p>
                    </div>
                  </div>
                  
                  <!-- Nama Pihak Pertama -->
                  <div class="group mb-6">
                    <label class="block text-sm font-semibold text-slate-700 mb-2">
                      <span>Nama Lengkap <span class="text-rose-500">*</span></span>
                    </label>
                    <input 
                      type="text" 
                      id="withdrawalNama1"
                      class="input-enhanced w-full p-4 rounded-xl"
                      placeholder="Nama lengkap nasabah"
                      required
                    >
                  </div>
                  
                  <!-- Akun Pihak Pertama -->
                  <div class="group">
                    <label class="block text-sm font-semibold text-slate-700 mb-2">
                      <span>Nama Akun Trading <span class="text-rose-500">*</span></span>
                    </label>
                    <input 
                      type="text" 
                      id="withdrawalAkun1"
                      class="input-enhanced w-full p-4 rounded-xl"
                      placeholder="Username akun trading"
                      required
                    >
                  </div>
                </div>
              </div>
              
              <!-- Pihak Kedua (Perusahaan) -->
              <div class="space-y-6">
                <div class="bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl p-6 border border-purple-200">
                  <div class="flex items-center gap-3 mb-6">
                    <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center">
                      <i class="ri-building-line text-white text-sm"></i>
                    </div>
                    <div>
                      <h3 class="font-bold text-purple-900">Pihak Kedua (Perusahaan)</h3>
                      <p class="text-xs text-purple-600">Data perusahaan penyedia layanan</p>
                    </div>
                  </div>
                  
                  <!-- Nama Pihak Kedua -->
                  <div class="group">
                    <label class="block text-sm font-semibold text-slate-700 mb-2">
                      <span>Nama Perusahaan <span class="text-rose-500">*</span></span>
                    </label>
                    <input 
                      type="text" 
                      id="withdrawalNama2"
                      class="input-enhanced w-full p-4 rounded-xl"
                      placeholder="Nama perusahaan"
                      value="NEEX CORPORATION"
                      required
                    >
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Tanggal Surat -->
            <div class="mt-8 grid lg:grid-cols-2 gap-8">
              <div class="group">
                <label class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-2">
                  <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-emerald-500 to-emerald-600 flex items-center justify-center">
                    <i class="ri-calendar-line text-white text-sm"></i>
                  </div>
                  <span>Tanggal Surat <span class="text-rose-500">*</span></span>
                </label>
                <input 
                  type="text" 
                  id="withdrawalTanggal"
                  class="input-enhanced w-full p-4 rounded-xl"
                  placeholder="Jakarta, 24 Mei 2025"
                  value="Jakarta, 24 Mei 2025"
                  required
                >
              </div>
              
              <!-- Catatan Khusus -->
              <div class="group">
                <label class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-2">
                  <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-slate-600 to-slate-800 flex items-center justify-center">
                    <i class="ri-alert-line text-white text-sm"></i>
                  </div>
                  <span>Catatan Khusus (Opsional)</span>
                </label>
                <textarea 
                  id="withdrawalCatatan"
                  rows="3" 
                  class="input-enhanced w-full p-4 rounded-xl"
                  placeholder="Tambah catatan khusus untuk perjanjian..."
                  maxlength="500"
                ></textarea>
              </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="mt-12 flex flex-wrap gap-6">
              <button 
                id="btnProcessWithdrawal"
                class="px-10 py-4 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-2xl font-semibold text-lg flex items-center gap-3 btn-glow"
              >
                <i class="ri-contract-line"></i>
                Buat Perjanjian Penarikan
                <i class="ri-arrow-right-line"></i>
              </button>
              
              <button 
                id="btnPreviewWithdrawal"
                class="px-8 py-4 bg-gradient-to-r from-slate-600 to-slate-800 text-white rounded-2xl font-semibold flex items-center gap-3 btn-glow"
              >
                <i class="ri-eye-line mr-2"></i>
                Preview Surat
              </button>
              
              <button 
                id="btnResetWithdrawal"
                class="px-8 py-4 bg-gradient-to-r from-slate-200 to-slate-300 text-slate-800 rounded-2xl font-semibold flex items-center gap-3 btn-glow"
              >
                <i class="ri-refresh-line mr-2"></i>
                Reset Form
              </button>
            </div>
          </div>
        </div>
      </section>
      
      <!-- System Info Panel -->
      <div class="bg-gradient-to-r from-dark to-dark-light rounded-3xl p-8 text-white mb-12 animate-fade-in">
        <div class="flex items-center justify-between mb-8">
          <div>
            <h3 class="text-2xl font-bold mb-2">Sistem Informasi</h3>
            <p class="text-slate-400">Monitoring dan status sistem real-time</p>
          </div>
          <div class="flex items-center gap-4">
            <div class="px-4 py-2 bg-emerald-900/30 text-emerald-400 rounded-xl text-sm font-semibold">
              <i class="ri-wifi-line mr-2"></i>Online
            </div>
            <div class="px-4 py-2 bg-blue-900/30 text-blue-400 rounded-xl text-sm font-semibold">
              <i class="ri-shield-check-line mr-2"></i>Terproteksi
            </div>
          </div>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div class="glass-card rounded-2xl p-6">
            <div class="flex items-center gap-4 mb-4">
              <div class="w-12 h-12 rounded-xl bg-blue-900/30 flex items-center justify-center">
                <i class="ri-database-2-line text-blue-400 text-xl"></i>
              </div>
              <div>
                <p class="text-sm text-slate-400">Data Tersimpan</p>
                <p id="savedCount" class="text-2xl font-bold">0</p>
              </div>
            </div>
            <p class="text-xs text-slate-500">Auto-save system aktif</p>
          </div>
          
          <div class="glass-card rounded-2xl p-6">
            <div class="flex items-center gap-4 mb-4">
              <div class="w-12 h-12 rounded-xl bg-emerald-900/30 flex items-center justify-center">
                <i class="ri-check-double-line text-emerald-400 text-xl"></i>
              </div>
              <div>
                <p class="text-sm text-slate-400">Validasi Berhasil</p>
                <p class="text-2xl font-bold">100%</p>
              </div>
            </div>
            <p class="text-xs text-slate-500">Semua data terverifikasi</p>
          </div>
          
          <div class="glass-card rounded-2xl p-6">
            <div class="flex items-center gap-4 mb-4">
              <div class="w-12 h-12 rounded-xl bg-amber-900/30 flex items-center justify-center">
                <i class="ri-time-line text-amber-400 text-xl"></i>
              </div>
              <div>
                <p class="text-sm text-slate-400">Response Time</p>
                <p class="text-2xl font-bold">0.2s</p>
              </div>
            </div>
            <p class="text-xs text-slate-500">Sistem sangat responsif</p>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- ===== MODAL SURAT PINJAMAN ===== -->
  <div id="modalLoan" class="fixed inset-0 z-50 hidden">
    <div class="absolute inset-0 bg-black/70 backdrop-blur-sm modal-overlay"></div>
    <div class="relative flex items-center justify-center min-h-screen p-6">
      <div class="bg-white rounded-3xl shadow-2xl w-full max-w-4xl overflow-hidden animate-scale-in surat-modal">
        <!-- Modal Header -->
        <div class="bg-gradient-to-r from-blue-600 to-blue-800 p-6 text-white">
          <div class="flex items-center justify-between">
            <div class="flex items-center gap-4">
              <div class="w-14 h-14 rounded-2xl bg-white/20 backdrop-blur-sm flex items-center justify-center">
                <i class="ri-file-text-line text-2xl"></i>
              </div>
              <div>
                <h2 class="text-2xl font-bold">Surat Pernyataan Pinjaman</h2>
                <p class="text-blue-100 text-sm">Dokumen legal pinjaman nasabah</p>
              </div>
            </div>
            <div class="flex items-center gap-4">
              <button onclick="downloadPDF('loan')" class="px-5 py-2.5 bg-white/20 backdrop-blur-sm rounded-xl text-sm font-semibold flex items-center gap-2 hover:bg-white/30 transition-all">
                <i class="ri-download-line"></i>Unduh PDF
              </button>
              <button onclick="closeModal('modalLoan')" class="w-12 h-12 rounded-2xl bg-white/20 hover:bg-white/30 flex items-center justify-center transition-all">
                <i class="ri-close-line text-xl"></i>
              </button>
            </div>
          </div>
        </div>
        
        <!-- Surat Content -->
        <div class="p-8 surat-content" id="loanSuratContent">
          <div class="border-surat">
            <div class="surat-container">
              <!-- Kop Surat yang lebih elegan -->
              <div class="kop-surat text-center mb-10">
                <div class="nama-perusahaan">NEEX CORPORATION</div>
                <div class="alamat-perusahaan">
                  Ground Floor, The Sotheby Building, Rodney Bay, Gros-Islet<br>
                  P.O. Box 838, Castries, Saint Lucia
                </div>
                <div class="text-sm text-slate-500 mt-4">Email: legal@neexcorporation.com  Tel: +1 (758) 456-7890</div>
              </div>
              
              <!-- Nomor Surat -->
              <div class="text-right text-slate-600 text-sm mb-8">
                <div class="nomor-surat">No: <span id="loanNomorSurat">LOAN/2025/001</span></div>
              </div>
              
              <!-- Judul Surat -->
              <div class="judul-surat font-poppins">
                SURAT PERNYATAAN PINJAMAN
              </div>
              
              <!-- Isi Surat -->
              <div class="isi-surat">
                <p class="mb-6">Yang bertanda tangan di bawah ini:</p>
                
                <!-- Data Nasabah Table -->
                <table class="data-nasabah-table">
                  <tr>
                    <td class="label">Nama Lengkap</td>
                    <td>:</td>
                    <td class="value" id="suratLoanNama">-</td>
                  </tr>
                  <tr>
                    <td class="label">Alamat Lengkap</td>
                    <td>:</td>
                    <td class="value" id="suratLoanAlamat">-</td>
                  </tr>
                  <tr>
                    <td class="label">NIK (Nomor Induk Kependudukan)</td>
                    <td>:</td>
                    <td class="value" id="suratLoanNik">-</td>
                  </tr>
                  <tr>
                    <td class="label">Nama Akun Trading</td>
                    <td>:</td>
                    <td class="value" id="suratLoanAkun">-</td>
                  </tr>
                  <tr>
                    <td class="label">Jumlah Pinjaman</td>
                    <td>:</td>
                    <td class="value font-semibold text-blue-700" id="suratLoanJumlah">-</td>
                  </tr>
                  <tr>
                    <td class="label">Pelunasan Setelah</td>
                    <td>:</td>
                    <td class="value" id="suratLoanPelunasan">-</td>
                  </tr>
                </table>
                
                <!-- Pernyataan -->
                <div class="garansi-note">
                  <p id="suratLoanCatatan" class="mb-0">Dengan surat ini menyatakan bahwa nasabah dengan data yang bersangkutan telah melakukan pinjaman perusahaan sesuai dengan ketentuan untuk penyelesaian sesi tradingnya dan pinjaman ini bisa dilunasi setelah anggota sudah menyelesaikan sesi tradingnya.</p>
                </div>
                
                <p class="mt-8">Demikian surat pernyataan ini dibuat dengan sebenar-benarnya untuk digunakan sebagaimana mestinya.</p>
                
                <!-- Tanda Tangan -->
                <div class="ttd-section">
                  <div class="ttd-area">
                    <div class="garis-ttd"></div>
                    <p class="nama-ttd">NEEX CORPORATION</p>
                    <p class="jabatan-ttd">( Richard Wynn )</p>
                    <p class="jabatan-ttd">Director of Compliance</p>
                    <p class="text-xs text-slate-500 mt-2">Cap dan Tanda Tangan Sah</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Action Buttons -->
        <div class="p-6 bg-slate-50 border-t border-slate-200 flex justify-between items-center">
          <div class="text-sm text-slate-600">
            <i class="ri-file-text-line text-blue-600 mr-2"></i>
            Dokumen resmi dengan kekuatan hukum
          </div>
          <div class="flex gap-4">
            <button 
              onclick="printModalData('loan')"
              class="px-6 py-2.5 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl font-semibold flex items-center gap-3 btn-glow hover:shadow-lg transition-all duration-300"
            >
              <i class="ri-printer-line"></i>
              Cetak Surat
            </button>
            <button 
              onclick="closeModal('modalLoan')"
              class="px-6 py-2.5 bg-gradient-to-r from-slate-600 to-slate-800 text-white rounded-xl font-semibold flex items-center gap-3 btn-glow hover:shadow-lg transition-all duration-300"
            >
              <i class="ri-check-line"></i>
              Selesai
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== MODAL SURAT PERJANJIAN PENARIKAN ===== -->
  <div id="modalWithdrawal" class="fixed inset-0 z-50 hidden">
    <div class="absolute inset-0 bg-black/70 backdrop-blur-sm modal-overlay"></div>
    <div class="relative flex items-center justify-center min-h-screen p-6">
      <div class="bg-white rounded-3xl shadow-2xl w-full max-w-4xl overflow-hidden animate-scale-in surat-modal">
        <!-- Modal Header -->
        <div class="bg-gradient-to-r from-purple-600 to-purple-800 p-6 text-white">
          <div class="flex items-center justify-between">
            <div class="flex items-center gap-4">
              <div class="w-14 h-14 rounded-2xl bg-white/20 backdrop-blur-sm flex items-center justify-center">
                <i class="ri-contract-line text-2xl"></i>
              </div>
              <div>
                <h2 class="text-2xl font-bold">Surat Perjanjian Penarikan</h2>
                <p class="text-purple-100 text-sm">Dokumen hukum perjanjian penarikan dana</p>
              </div>
            </div>
            <div class="flex items-center gap-4">
              <button onclick="downloadPDF('withdrawal')" class="px-5 py-2.5 bg-white/20 backdrop-blur-sm rounded-xl text-sm font-semibold flex items-center gap-2 hover:bg-white/30 transition-all">
                <i class="ri-download-line"></i>Unduh PDF
              </button>
              <button onclick="closeModal('modalWithdrawal')" class="w-12 h-12 rounded-2xl bg-white/20 hover:bg-white/30 flex items-center justify-center transition-all">
                <i class="ri-close-line text-xl"></i>
              </button>
            </div>
          </div>
        </div>
        
        <!-- Surat Content -->
        <div class="p-8 surat-content" id="withdrawalSuratContent">
          <div class="border-surat">
            <div class="surat-container">
              <!-- Kop Surat yang lebih elegan -->
              <div class="kop-surat text-center mb-10">
                <div class="nama-perusahaan">NEEX CORPORATION</div>
                <div class="alamat-perusahaan">
                  Ground Floor, The Sotheby Building, Rodney Bay, Gros-Islet<br>
                  P.O. Box 838, Castries, Saint Lucia
                </div>
                <div class="text-sm text-slate-500 mt-4">Email: legal@neexcorporation.com  Tel: +1 (758) 456-7890</div>
              </div>
              
              <!-- Nomor Surat -->
              <div class="text-right text-slate-600 text-sm mb-8">
                <div class="nomor-surat">No: <span id="withdrawalNomorSurat">AGR/2025/001</span></div>
              </div>
              
              <!-- Judul Surat -->
              <div class="judul-surat font-poppins">
                SURAT PERJANJIAN PENARIKAN
              </div>
              
              <!-- Isi Surat -->
              <div class="isi-surat">
                <!-- Data Pihak -->
                <div class="mb-8">
                  <p class="font-semibold text-blue-700 mb-4">Pihak Pertama (Nasabah):</p>
                  <table class="data-nasabah-table mb-6">
                    <tr>
                      <td class="label">Nama Lengkap</td>
                      <td>:</td>
                      <td class="value" id="suratWithdrawalNama1">-</td>
                    </tr>
                    <tr>
                      <td class="label">Nama Akun Trading</td>
                      <td>:</td>
                      <td class="value" id="suratWithdrawalAkun1">-</td>
                    </tr>
                  </table>
                  
                  <p class="font-semibold text-purple-700 mb-4">Pihak Kedua (Perusahaan):</p>
                  <table class="data-nasabah-table">
                    <tr>
                      <td class="label">Nama Perusahaan</td>
                      <td>:</td>
                      <td class="value" id="suratWithdrawalNama2">-</td>
                    </tr>
                  </table>
                </div>
                
                <!-- Isi Perjanjian -->
                <p class="mb-6">Dengan ini kedua belah pihak sepakat untuk membuat dan menandatangani perjanjian dengan ketentuan sebagai berikut:</p>
                
                <div class="perjanjian-clause mb-6">
                  <p class="font-semibold mb-2">PASAL 1 - KEWAJIBAN PIHAK KEDUA</p>
                  <p>Apabila setelah Pihak Pertama menyelesaikan <span class="font-semibold">PELUNASAN PINJAMAN</span> maka Pihak Kedua diharuskan untuk memproseskan seluruh penarikan Pihak Pertama secara langsung ke rekening Pihak Pertama yang terdaftar.</p>
                </div>
                
                <div class="perjanjian-clause mb-6">
                  <p class="font-semibold mb-2">PASAL 2 - SANKSI DAN KONSEKUENSI</p>
                  <p id="suratWithdrawalCatatan">Jika Pihak Pertama sudah menyelesaikan <span class="font-semibold">PELUNASAN PINJAMAN</span> dan Pihak Kedua tidak memproseskan penarikan kepada Pihak Pertama, maka Pihak Pertama berhak melaporkan Pihak Kedua kepada pihak berwajib dan akan diproseskan secara hukum yang berlaku di Indonesia.</p>
                </div>
                
                <div class="perjanjian-clause">
                  <p class="font-semibold mb-2">PASAL 3 - KEABSAHAN PERJANJIAN</p>
                  <p>Demikianlah surat perjanjian penarikan ini dibuat dengan tanpa paksaan dari pihak manapun dan surat perjanjian penarikan ini sah secara hukum yang berlaku dan bagi yang melanggar akan diproseskan secara hukum.</p>
                </div>
                
                <!-- Tanda Tangan -->
                <div class="ttd-section">
                  <div class="flex justify-between">
                    <!-- TTD Pihak Pertama -->
                    <div class="ttd-area text-center">
                      <p class="font-bold mb-2">PIHAK PERTAMA</p>
                      <div class="garis-ttd" style="width: 200px;"></div>
                      <p class="nama-ttd" id="ttdNama1">-</p>
                      <p class="jabatan-ttd">(Nasabah)</p>
                    </div>
                    
                    <!-- TTD Pihak Kedua -->
                    <div class="ttd-area text-center">
                      <p class="font-bold mb-2">PIHAK KEDUA</p>
                      <div class="garis-ttd" style="width: 200px;"></div>
                      <p class="nama-ttd">NEEX CORPORATION</p>
                      <p class="jabatan-ttd">( Richard Wynn )</p>
                      <p class="jabatan-ttd">Director of Compliance</p>
                    </div>
                  </div>
                  
                  <!-- Tanggal dan Tempat -->
                  <div class="mt-16 text-center">
                    <p class="tanggal-surat" id="suratWithdrawalTanggal">Jakarta, 24 Mei 2025</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Action Buttons -->
        <div class="p-6 bg-slate-50 border-t border-slate-200 flex justify-between items-center">
          <div class="text-sm text-slate-600">
            <i class="ri-scales-3-line text-purple-600 mr-2"></i>
            Dokumen hukum yang mengikat kedua belah pihak
          </div>
          <div class="flex gap-4">
            <button 
              onclick="printModalData('withdrawal')"
              class="px-6 py-2.5 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-xl font-semibold flex items-center gap-3 btn-glow hover:shadow-lg transition-all duration-300"
            >
              <i class="ri-printer-line"></i>
              Cetak Surat
            </button>
            <button 
              onclick="closeModal('modalWithdrawal')"
              class="px-6 py-2.5 bg-gradient-to-r from-slate-600 to-slate-800 text-white rounded-xl font-semibold flex items-center gap-3 btn-glow hover:shadow-lg transition-all duration-300"
            >
              <i class="ri-check-line"></i>
              Selesai
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- JavaScript System -->
  <script>
    // ===== SYSTEM INITIALIZATION =====
    
    // 1. Real-time Clock
    function updateSystemClock() {
      const now = new Date();
      const time = now.toLocaleTimeString('id-ID', { 
        hour12: false,
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit'
      });
      document.getElementById('systemClock').textContent = time;
      document.getElementById('liveClock').textContent = time;
    }
    setInterval(updateSystemClock, 1000);
    updateSystemClock();
    
    // 2. Page Navigation
    document.getElementById('navLock').addEventListener('click', () => {
      showSection('sectionLock');
      showSystemNotification('Sistem Penguncian Paket', 'Berhasil beralih ke form penguncian paket', 'lock');
    });
    
    document.getElementById('navReject').addEventListener('click', () => {
      showSection('sectionReject');
      showSystemNotification('Sistem Garansi Ditolak', 'Berhasil beralih ke form garansi ditolak', 'warning');
    });

    // Navigation for new features
    document.getElementById('navLoan').addEventListener('click', () => {
      showSection('sectionLoan');
      showSystemNotification('Pengajuan Pinjaman', 'Berhasil beralih ke form pengajuan pinjaman', 'info');
    });

    document.getElementById('navWithdrawal').addEventListener('click', () => {
      showSection('sectionWithdrawal');
      showSystemNotification('Perjanjian Penarikan', 'Berhasil beralih ke form perjanjian penarikan', 'info');
    });
    
    function showSection(sectionId) {
      // Hide all sections
      document.querySelectorAll('.page-enter').forEach(section => {
        section.classList.add('hidden');
      });
      
      // Show selected section with animation
      setTimeout(() => {
        const section = document.getElementById(sectionId);
        section.classList.remove('hidden');
        section.classList.add('page-enter');
      }, 10);
    }
    
    // 3. Currency Formatting
    function formatCurrency(input) {
      let value = input.value.replace(/\./g, '');
      if (!isNaN(value) && value !== '') {
        input.value = parseInt(value).toLocaleString('id-ID');
        if (input.id === 'lockModal') {
          calculateLockResult();
        }
      }
    }
    
    // 4. Lock Form Calculation
    function calculateLockResult() {
      const modal = parseFloat(document.getElementById('lockModal').value.replace(/\./g, '')) || 0;
      const profit = parseFloat(document.getElementById('lockProfit').value) || 0;
      const hasil = modal + (modal * profit / 100);
      
      document.getElementById('lockHasil').value = formatRupiah(hasil);
    }
    
    // Event listeners for calculation
    document.getElementById('lockProfit').addEventListener('input', calculateLockResult);
    document.getElementById('lockModal').addEventListener('input', calculateLockResult);
    document.getElementById('btnCalculate').addEventListener('click', calculateLockResult);
    
    // 5. Character Counter
    document.getElementById('lockNote').addEventListener('input', function() {
      const count = this.value.length;
      document.getElementById('charCountLock').textContent = `${count}/500`;
    });
    
    document.getElementById('rejectNote').addEventListener('input', function() {
      const count = this.value.length;
      document.getElementById('charCountReject').textContent = `${count}/500`;
    });

    document.getElementById('loanCatatan').addEventListener('input', function() {
      const count = this.value.length;
      document.getElementById('charCountLoan').textContent = `${count}/500`;
    });
    
    // 6. Email Validation
    function validateEmail(email) {
      const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return re.test(email);
    }
    
    // 7. Process Lock Form
    document.getElementById('btnProcessLock').addEventListener('click', function() {
      if (!validateLockForm()) {
        showSystemNotification('Validasi Gagal', 'Harap lengkapi semua field yang wajib diisi', 'error');
        return;
      }
      
      const formData = {
        email: document.getElementById('lockEmail').value,
        paket: document.getElementById('lockPaket').value,
        tahap: document.getElementById('lockTahap').value,
        modal: document.getElementById('lockModal').value,
        profit: document.getElementById('lockProfit').value,
        hasil: document.getElementById('lockHasil').value,
        note: document.getElementById('lockNote').value
      };
      
      const currentTime = new Date();
      
      // Populate modal
      // Note: Modal lock dihapus untuk fokus pada surat
      
      // Save data
      saveData('lock', formData);
      
      // Show success notification
      showSystemNotification('Penguncian Berhasil', 'Paket trading berhasil dikunci oleh sistem', 'success');
    });
    
    function validateLockForm() {
      const fields = [
        'lockEmail', 'lockPaket', 'lockTahap', 'lockModal', 'lockProfit'
      ];
      
      let isValid = true;
      
      for (const fieldId of fields) {
        const field = document.getElementById(fieldId);
        if (!field.value.trim()) {
          field.classList.add('border-rose-500', 'ring-2', 'ring-rose-200');
          setTimeout(() => {
            field.classList.remove('border-rose-500', 'ring-2', 'ring-rose-200');
          }, 3000);
          isValid = false;
        }
      }
      
      // Email validation
      if (!validateEmail(document.getElementById('lockEmail').value)) {
        showSystemNotification('Email Tidak Valid', 'Format email tidak sesuai', 'error');
        isValid = false;
      }
      
      return isValid;
    }
    
    // 8. Process Reject Form
    document.getElementById('btnProcessReject').addEventListener('click', function() {
      if (!validateRejectForm()) {
        showSystemNotification('Validasi Gagal', 'Harap lengkapi semua field yang wajib diisi', 'error');
        return;
      }
      
      const formData = {
        email: document.getElementById('rejectEmail').value,
        paket: document.getElementById('rejectPaket').value,
        modal: document.getElementById('rejectModal').value,
        tahap1: document.getElementById('rejectTahap1').value,
        tahap2: document.getElementById('rejectTahap2').value,
        alt1: document.getElementById('rejectAlt1').value,
        note: document.getElementById('rejectNote').value
      };
      
      // Save data
      saveData('reject', formData);
      
      // Show notification
      showSystemNotification('Proses Selesai', 'Data garansi ditolak berhasil diproses', 'warning');
    });
    
    function validateRejectForm() {
      const fields = [
        'rejectEmail', 'rejectPaket', 'rejectModal', 'rejectTahap1'
      ];
      
      let isValid = true;
      
      for (const fieldId of fields) {
        const field = document.getElementById(fieldId);
        if (!field.value.trim()) {
          field.classList.add('border-rose-500', 'ring-2', 'ring-rose-200');
          setTimeout(() => {
            field.classList.remove('border-rose-500', 'ring-2', 'ring-rose-200');
          }, 3000);
          isValid = false;
        }
      }
      
      // Email validation
      if (!validateEmail(document.getElementById('rejectEmail').value)) {
        showSystemNotification('Email Tidak Valid', 'Format email tidak sesuai', 'error');
        isValid = false;
      }
      
      return isValid;
    }

    // ===== FUNGSI BARU UNTUK PENGJUAN PINJAMAN =====
    function validateLoanForm() {
      const fields = [
        'loanNama', 'loanAlamat', 'loanNik', 'loanAkun', 'loanJumlah', 'loanPelunasan'
      ];
      
      let isValid = true;
      
      for (const fieldId of fields) {
        const field = document.getElementById(fieldId);
        if (!field.value.trim()) {
          field.classList.add('border-rose-500', 'ring-2', 'ring-rose-200');
          setTimeout(() => {
            field.classList.remove('border-rose-500', 'ring-2', 'ring-rose-200');
          }, 3000);
          isValid = false;
        }
      }
      
      // NIK validation
      const nik = document.getElementById('loanNik').value;
      if (nik.length < 16) {
        showSystemNotification('NIK Tidak Valid', 'NIK harus 16 digit', 'error');
        document.getElementById('loanNik').classList.add('border-rose-500', 'ring-2', 'ring-rose-200');
        setTimeout(() => {
          document.getElementById('loanNik').classList.remove('border-rose-500', 'ring-2', 'ring-rose-200');
        }, 3000);
        isValid = false;
      }
      
      return isValid;
    }

    document.getElementById('btnProcessLoan').addEventListener('click', function() {
      if (!validateLoanForm()) {
        showSystemNotification('Validasi Gagal', 'Harap lengkapi semua field yang wajib diisi', 'error');
        return;
      }
      
      // Collect data
      const formData = {
        nama: document.getElementById('loanNama').value,
        alamat: document.getElementById('loanAlamat').value,
        nik: document.getElementById('loanNik').value,
        akun: document.getElementById('loanAkun').value,
        jumlah: document.getElementById('loanJumlah').value,
        pelunasan: document.getElementById('loanPelunasan').value,
        catatan: document.getElementById('loanCatatan').value
      };
      
      // Generate nomor surat
      const nomorSurat = `LOAN/${new Date().getFullYear()}/${Math.floor(Math.random() * 900 + 100)}`;
      document.getElementById('loanNomorSurat').textContent = nomorSurat;
      
      // Populate surat
      document.getElementById('suratLoanNama').textContent = formData.nama;
      document.getElementById('suratLoanAlamat').textContent = formData.alamat;
      document.getElementById('suratLoanNik').textContent = formData.nik;
      document.getElementById('suratLoanAkun').textContent = formData.akun;
      document.getElementById('suratLoanJumlah').textContent = formData.jumlah;
      document.getElementById('suratLoanPelunasan').textContent = formData.pelunasan;
      
      // Handle catatan
      const catatanText = document.getElementById('suratLoanCatatan');
      if (formData.catatan.trim()) {
        catatanText.textContent = formData.catatan;
      } else {
        catatanText.textContent = 'Dengan surat ini menyatakan bahwa nasabah dengan data yang bersangkutan telah melakukan pinjaman perusahaan sesuai dengan ketentuan untuk penyelesaian sesi tradingnya dan pinjaman ini bisa dilunasi setelah anggota sudah menyelesaikan sesi tradingnya.';
      }
      
      // Show modal
      document.getElementById('modalLoan').classList.remove('hidden');
      
      // Save data
      saveData('loan', formData);
      
      // Show success notification
      showSystemNotification('Surat Berhasil Dibuat', 'Surat pernyataan pinjaman siap digunakan', 'success');
    });

    document.getElementById('btnPreviewLoan').addEventListener('click', function() {
      if (!validateLoanForm()) {
        showSystemNotification('Validasi Gagal', 'Harap lengkapi semua field yang wajib diisi', 'error');
        return;
      }
      
      // Generate nomor surat
      const nomorSurat = `LOAN/${new Date().getFullYear()}/${Math.floor(Math.random() * 900 + 100)}`;
      document.getElementById('loanNomorSurat').textContent = nomorSurat;
      
      // Populate surat for preview
      document.getElementById('suratLoanNama').textContent = document.getElementById('loanNama').value;
      document.getElementById('suratLoanAlamat').textContent = document.getElementById('loanAlamat').value;
      document.getElementById('suratLoanNik').textContent = document.getElementById('loanNik').value;
      document.getElementById('suratLoanAkun').textContent = document.getElementById('loanAkun').value;
      document.getElementById('suratLoanJumlah').textContent = document.getElementById('loanJumlah').value;
      document.getElementById('suratLoanPelunasan').textContent = document.getElementById('loanPelunasan').value;
      
      // Handle catatan
      const catatanText = document.getElementById('suratLoanCatatan');
      const catatan = document.getElementById('loanCatatan').value.trim();
      if (catatan) {
        catatanText.textContent = catatan;
      } else {
        catatanText.textContent = 'Dengan surat ini menyatakan bahwa nasabah dengan data yang bersangkutan telah melakukan pinjaman perusahaan sesuai dengan ketentuan untuk penyelesaian sesi tradingnya dan pinjaman ini bisa dilunasi setelah anggota sudah menyelesaikan sesi tradingnya.';
      }
      
      // Show modal
      document.getElementById('modalLoan').classList.remove('hidden');
      showSystemNotification('Preview Surat', 'Preview surat pinjaman', 'info');
    });

    // ===== FUNGSI BARU UNTUK SURAT PERJANJIAN PENARIKAN =====
    function validateWithdrawalForm() {
      const fields = [
        'withdrawalNama1', 'withdrawalAkun1', 'withdrawalNama2', 'withdrawalTanggal'
      ];
      
      let isValid = true;
      
      for (const fieldId of fields) {
        const field = document.getElementById(fieldId);
        if (!field.value.trim()) {
          field.classList.add('border-rose-500', 'ring-2', 'ring-rose-200');
          setTimeout(() => {
            field.classList.remove('border-rose-500', 'ring-2', 'ring-rose-200');
          }, 3000);
          isValid = false;
        }
      }
      
      return isValid;
    }

    document.getElementById('btnProcessWithdrawal').addEventListener('click', function() {
      if (!validateWithdrawalForm()) {
        showSystemNotification('Validasi Gagal', 'Harap lengkapi semua field yang wajib diisi', 'error');
        return;
      }
      
      // Collect data
      const formData = {
        nama1: document.getElementById('withdrawalNama1').value,
        akun1: document.getElementById('withdrawalAkun1').value,
        nama2: document.getElementById('withdrawalNama2').value,
        tanggal: document.getElementById('withdrawalTanggal').value,
        catatan: document.getElementById('withdrawalCatatan').value
      };
      
      // Generate nomor surat
      const nomorSurat = `AGR/${new Date().getFullYear()}/${Math.floor(Math.random() * 900 + 100)}`;
      document.getElementById('withdrawalNomorSurat').textContent = nomorSurat;
      
      // Populate surat
      document.getElementById('suratWithdrawalNama1').textContent = formData.nama1;
      document.getElementById('ttdNama1').textContent = formData.nama1;
      document.getElementById('suratWithdrawalAkun1').textContent = formData.akun1;
      document.getElementById('suratWithdrawalNama2').textContent = formData.nama2;
      document.getElementById('suratWithdrawalTanggal').textContent = formData.tanggal;
      
      // Handle catatan
      const catatanText = document.getElementById('suratWithdrawalCatatan');
      if (formData.catatan.trim()) {
        catatanText.textContent = formData.catatan;
      } else {
        catatanText.textContent = 'Jika Pihak Pertama sudah menyelesaikan PELUNASAN PINJAMAN dan Pihak Kedua tidak memproseskan penarikan kepada Pihak Pertama, maka Pihak Pertama berhak melaporkan Pihak Kedua kepada pihak berwajib dan akan diproseskan secara hukum yang berlaku di Indonesia.';
      }
      
      // Show modal
      document.getElementById('modalWithdrawal').classList.remove('hidden');
      
      // Save data
      saveData('withdrawal', formData);
      
      // Show success notification
      showSystemNotification('Perjanjian Berhasil Dibuat', 'Surat perjanjian penarikan siap digunakan', 'success');
    });

    document.getElementById('btnPreviewWithdrawal').addEventListener('click', function() {
      if (!validateWithdrawalForm()) {
        showSystemNotification('Validasi Gagal', 'Harap lengkapi semua field yang wajib diisi', 'error');
        return;
      }
      
      // Generate nomor surat
      const nomorSurat = `AGR/${new Date().getFullYear()}/${Math.floor(Math.random() * 900 + 100)}`;
      document.getElementById('withdrawalNomorSurat').textContent = nomorSurat;
      
      // Populate surat for preview
      document.getElementById('suratWithdrawalNama1').textContent = document.getElementById('withdrawalNama1').value;
      document.getElementById('ttdNama1').textContent = document.getElementById('withdrawalNama1').value;
      document.getElementById('suratWithdrawalAkun1').textContent = document.getElementById('withdrawalAkun1').value;
      document.getElementById('suratWithdrawalNama2').textContent = document.getElementById('withdrawalNama2').value;
      document.getElementById('suratWithdrawalTanggal').textContent = document.getElementById('withdrawalTanggal').value;
      
      // Handle catatan
      const catatanText = document.getElementById('suratWithdrawalCatatan');
      const catatan = document.getElementById('withdrawalCatatan').value.trim();
      if (catatan) {
        catatanText.textContent = catatan;
      } else {
        catatanText.textContent = 'Jika Pihak Pertama sudah menyelesaikan PELUNASAN PINJAMAN dan Pihak Kedua tidak memproseskan penarikan kepada Pihak Pertama, maka Pihak Pertama berhak melaporkan Pihak Kedua kepada pihak berwajib dan akan diproseskan secara hukum yang berlaku di Indonesia.';
      }
      
      // Show modal
      document.getElementById('modalWithdrawal').classList.remove('hidden');
      showSystemNotification('Preview Surat', 'Preview surat perjanjian penarikan', 'info');
    });
    
    // 10. Data Management
    function saveData(type, data) {
      const key = `asiang_${type}_${Date.now()}`;
      const dataWithMeta = {
        ...data,
        timestamp: new Date().toISOString(),
        id: `${type.toUpperCase()}-${Math.random().toString(36).substr(2, 9).toUpperCase()}`,
        status: 'completed'
      };
      
      localStorage.setItem(key, JSON.stringify(dataWithMeta));
      
      updateSavedCount();
      showSystemNotification('Data Tersimpan', 'Data berhasil disimpan ke sistem', 'save');
    }
    
    function updateSavedCount() {
      let count = 0;
      for (let i = 0; i < localStorage.length; i++) {
        if (localStorage.key(i).startsWith('asiang_')) {
          count++;
        }
      }
      document.getElementById('savedCount').textContent = count;
    }
    
    // 11. Utility Functions
    function formatRupiah(angka) {
      return 'Rp ' + angka.toString().replace(/\B(?=(\d{3})+(?!\d))/g, '.');
    }
    
    function closeModal(modalId) {
      const modal = document.getElementById(modalId);
      modal.classList.add('hidden');
      showSystemNotification('Modal Ditutup', 'Panel berhasil ditutup', 'info');
    }

    // Fungsi untuk download PDF
    async function downloadPDF(type) {
      const { jsPDF } = window.jspdf;
      const element = document.getElementById(`${type}SuratContent`);
      
      // Tambahkan kelas untuk print
      element.classList.add('print-only');
      
      // Tunggu sejenak untuk memastikan DOM sudah dirender
      await new Promise(resolve => setTimeout(resolve, 500));
      
      try {
        const canvas = await html2canvas(element, {
          scale: 2,
          useCORS: true,
          logging: false
        });
        
        const imgData = canvas.toDataURL('image/png');
        const pdf = new jsPDF('p', 'mm', 'a4');
        const imgWidth = 210;
        const pageHeight = 295;
        const imgHeight = canvas.height * imgWidth / canvas.width;
        let heightLeft = imgHeight;
        let position = 0;
        
        pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
        heightLeft -= pageHeight;
        
        while (heightLeft >= 0) {
          position = heightLeft - imgHeight;
          pdf.addPage();
          pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
          heightLeft -= pageHeight;
        }
        
        pdf.save(`surat_${type}_${Date.now()}.pdf`);
        showSystemNotification('PDF Siap', 'Dokumen berhasil diunduh sebagai PDF', 'success');
      } catch (error) {
        console.error('Error generating PDF:', error);
        showSystemNotification('Error', 'Gagal membuat PDF', 'error');
      } finally {
        // Hapus kelas print-only
        element.classList.remove('print-only');
      }
    }
    
    // 12. Enhanced System Notification System
    function showSystemNotification(title, message, type = 'info') {
      const notificationSystem = document.getElementById('notificationSystem');
      
      // Create notification element
      const notification = document.createElement('div');
      notification.className = `animate-notification-slide rounded-2xl p-5 shadow-2xl border-l-4 min-w-[300px] transform transition-all duration-300 hover:scale-[1.02] hover:shadow-xl cursor-pointer`;
      
      // Set colors and icon based on type
      const config = {
        success: { 
          bg: 'bg-gradient-to-r from-emerald-50 to-emerald-100',
          border: 'border-l-emerald-500',
          icon: 'ri-checkbox-circle-fill text-emerald-500',
          titleColor: 'text-emerald-800'
        },
        error: { 
          bg: 'bg-gradient-to-r from-rose-50 to-rose-100',
          border: 'border-l-rose-500',
          icon: 'ri-close-circle-fill text-rose-500',
          titleColor: 'text-rose-800'
        },
        warning: { 
          bg: 'bg-gradient-to-r from-amber-50 to-amber-100',
          border: 'border-l-amber-500',
          icon: 'ri-alert-fill text-amber-500',
          titleColor: 'text-amber-800'
        },
        info: { 
          bg: 'bg-gradient-to-r from-blue-50 to-blue-100',
          border: 'border-l-blue-500',
          icon: 'ri-information-fill text-blue-500',
          titleColor: 'text-blue-800'
        },
        lock: { 
          bg: 'bg-gradient-to-r from-emerald-50 to-blue-50',
          border: 'border-l-emerald-500',
          icon: 'ri-lock-fill text-emerald-500',
          titleColor: 'text-emerald-800'
        },
        save: { 
          bg: 'bg-gradient-to-r from-blue-50 to-cyan-50',
          border: 'border-l-cyan-500',
          icon: 'ri-save-fill text-cyan-500',
          titleColor: 'text-cyan-800'
        }
      }[type];
      
      notification.className += ` ${config.bg} ${config.border}`;
      
      const currentTime = new Date().toLocaleTimeString('id-ID', {hour: '2-digit', minute:'2-digit'});
      
      notification.innerHTML = `
        <div class="flex items-start gap-4">
          <div class="flex-shrink-0">
            <i class="${config.icon} text-2xl"></i>
          </div>
          <div class="flex-1">
            <div class="flex justify-between items-start mb-2">
              <h4 class="font-bold ${config.titleColor}">${title}</h4>
              <button onclick="this.parentElement.parentElement.parentElement.remove()" class="text-slate-400 hover:text-slate-600">
                <i class="ri-close-line"></i>
              </button>
            </div>
            <p class="text-slate-700 text-sm">${message}</p>
            <div class="mt-3 flex items-center justify-between">
              <span class="text-xs text-slate-500">${currentTime}</span>
              <div class="w-32 h-1 bg-slate-200 rounded-full overflow-hidden">
                <div class="h-full ${type === 'success' ? 'bg-emerald-500' : type === 'error' ? 'bg-rose-500' : 'bg-blue-500'} animate-[shrink_5s_linear_forwards]"></div>
              </div>
            </div>
          </div>
        </div>
      `;
      
      // Add to notification system
      notificationSystem.appendChild(notification);
      
      // Auto remove after 5 seconds
      setTimeout(() => {
        if (notification.parentNode) {
          notification.classList.replace('animate-notification-slide', 'animate-notification-hide');
          setTimeout(() => {
            if (notification.parentNode) {
              notification.remove();
            }
          }, 500);
        }
      }, 5000);
      
      // Add click to dismiss
      notification.addEventListener('click', function() {
        this.classList.replace('animate-notification-slide', 'animate-notification-hide');
        setTimeout(() => {
          if (this.parentNode) {
            this.remove();
          }
        }, 500);
      });
    }
    
    // 13. Button Event Listeners
    
    // Copy hasil
    document.getElementById('btnCopyLock').addEventListener('click', function() {
      const hasil = document.getElementById('lockHasil').value;
      navigator.clipboard.writeText(hasil).then(() => {
        showSystemNotification('Clipboard', 'Hasil berhasil disalin ke clipboard', 'info');
      });
    });
    
    // Reset forms
    document.getElementById('btnResetLock').addEventListener('click', function() {
      if (confirm('Reset semua data form Penguncian Paket?')) {
        document.getElementById('lockEmail').value = '';
        document.getElementById('lockPaket').value = '';
        document.getElementById('lockTahap').value = '';
        document.getElementById('lockModal').value = '';
        document.getElementById('lockProfit').value = '';
        document.getElementById('lockHasil').value = '';
        document.getElementById('lockNote').value = '';
        document.getElementById('charCountLock').textContent = '0/500';
        
        // Remove lock data from localStorage
        for (let i = 0; i < localStorage.length; i++) {
          if (localStorage.key(i).startsWith('asiang_lock_')) {
            localStorage.removeItem(localStorage.key(i));
          }
        }
        
        updateSavedCount();
        showSystemNotification('Form Direset', 'Form Penguncian Paket berhasil direset', 'info');
      }
    });
    
    document.getElementById('btnResetReject').addEventListener('click', function() {
      if (confirm('Reset semua data form Garansi Ditolak?')) {
        document.getElementById('rejectEmail').value = '';
        document.getElementById('rejectPaket').value = '';
        document.getElementById('rejectModal').value = '';
        document.getElementById('rejectTahap1').value = '';
        document.getElementById('rejectTahap2').value = '';
        document.getElementById('rejectAlt1').value = '';
        document.getElementById('rejectNote').value = '';
        document.getElementById('charCountReject').textContent = '0/500';
        
        // Remove reject data from localStorage
        for (let i = 0; i < localStorage.length; i++) {
          if (localStorage.key(i).startsWith('asiang_reject_')) {
            localStorage.removeItem(localStorage.key(i));
          }
        }
        
        updateSavedCount();
        showSystemNotification('Form Direset', 'Form Garansi Ditolak berhasil direset', 'info');
      }
    });

    // Reset form pinjaman
    document.getElementById('btnResetLoan').addEventListener('click', function() {
      if (confirm('Reset semua data form Pengajuan Pinjaman?')) {
        document.getElementById('loanNama').value = '';
        document.getElementById('loanAlamat').value = '';
        document.getElementById('loanNik').value = '';
        document.getElementById('loanAkun').value = '';
        document.getElementById('loanJumlah').value = '';
        document.getElementById('loanPelunasan').value = 'Selesai sesi trading';
        document.getElementById('loanCatatan').value = '';
        document.getElementById('charCountLoan').textContent = '0/500';
        
        // Remove loan data from localStorage
        for (let i = 0; i < localStorage.length; i++) {
          if (localStorage.key(i).startsWith('asiang_loan_')) {
            localStorage.removeItem(localStorage.key(i));
          }
        }
        
        updateSavedCount();
        showSystemNotification('Form Direset', 'Form Pengajuan Pinjaman berhasil direset', 'info');
      }
    });

    // Reset form perjanjian penarikan
    document.getElementById('btnResetWithdrawal').addEventListener('click', function() {
      if (confirm('Reset semua data form Perjanjian Penarikan?')) {
        document.getElementById('withdrawalNama1').value = '';
        document.getElementById('withdrawalAkun1').value = '';
        document.getElementById('withdrawalNama2').value = 'NEEX CORPORATION';
        document.getElementById('withdrawalTanggal').value = 'Jakarta, 24 Mei 2025';
        document.getElementById('withdrawalCatatan').value = '';
        
        // Remove withdrawal data from localStorage
        for (let i = 0; i < localStorage.length; i++) {
          if (localStorage.key(i).startsWith('asiang_withdrawal_')) {
            localStorage.removeItem(localStorage.key(i));
          }
        }
        
        updateSavedCount();
        showSystemNotification('Form Direset', 'Form Perjanjian Penarikan berhasil direset', 'info');
      }
    });
    
    // 14. Additional Functions
    function printModalData(type) {
      const printWindow = window.open('', '_blank');
      const content = document.getElementById(`${type}SuratContent`).innerHTML;
      
      printWindow.document.write(`
        <!DOCTYPE html>
        <html>
        <head>
          <title>Cetak Surat</title>
          <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
          <style>
            body { 
              font-family: 'Poppins', sans-serif;
              line-height: 1.8;
              color: #1a1a1a;
              margin: 40px;
              background: white;
            }
            .kop-surat {
              border-bottom: 4px solid #1e40af;
              padding-bottom: 25px;
              margin-bottom: 40px;
              text-align: center;
            }
            .nama-perusahaan {
              font-size: 32px;
              font-weight: 800;
              color: #1e40af;
              letter-spacing: 1px;
              text-transform: uppercase;
              margin-bottom: 8px;
              background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
              -webkit-background-clip: text;
              -webkit-text-fill-color: transparent;
            }
            .alamat-perusahaan {
              font-size: 14px;
              color: #4b5563;
              font-weight: 500;
              line-height: 1.6;
            }
            .judul-surat {
              font-size: 28px;
              font-weight: 700;
              text-align: center;
              margin: 40px 0;
              color: #1e40af;
              position: relative;
              padding-bottom: 15px;
            }
            .judul-surat::after {
              content: '';
              position: absolute;
              bottom: 0;
              left: 50%;
              transform: translateX(-50%);
              width: 200px;
              height: 3px;
              background: linear-gradient(90deg, transparent, #1e40af, transparent);
            }
            .data-nasabah-table {
              width: 100%;
              border-collapse: collapse;
              margin: 30px 0;
              background: #f8fafc;
              border-radius: 12px;
              overflow: hidden;
            }
            .data-nasabah-table td {
              padding: 16px 24px;
              vertical-align: top;
              font-size: 15px;
              border-bottom: 1px solid #e2e8f0;
            }
            .data-nasabah-table .label {
              width: 35%;
              font-weight: 600;
              color: #1e40af;
              background: #f1f5f9;
            }
            .garansi-note {
              background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
              border-left: 5px solid #0ea5e9;
              padding: 24px;
              margin: 30px 0;
              border-radius: 10px;
              font-style: italic;
              color: #0369a1;
            }
            .perjanjian-clause {
              background: #fef3c7;
              border-left: 5px solid #f59e0b;
              padding: 20px;
              margin: 25px 0;
              border-radius: 10px;
              color: #92400e;
            }
            .ttd-section {
              margin-top: 100px;
              text-align: center;
            }
            .garis-ttd {
              width: 250px;
              height: 1px;
              background: #4b5563;
              margin: 80px auto 10px;
            }
            .nama-ttd {
              font-weight: 700;
              color: #1e40af;
              font-size: 16px;
              text-transform: uppercase;
              letter-spacing: 1px;
            }
            .jabatan-ttd {
              font-style: normal;
              color: #6b7280;
              font-weight: 500;
              font-size: 14px;
              margin-top: 5px;
            }
            @media print { 
              body { margin: 20px; }
              .no-print { display: none !important; }
            }
          </style>
        </head>
        <body>
          ${content}
          <script>
            window.onload = function() { 
              window.print(); 
              setTimeout(function(){ window.close(); }, 500); 
            }
          <\/script>
        </body>
        </html>
      `);
      
      printWindow.document.close();
      showSystemNotification('Print', 'Data sedang diproses untuk dicetak', 'info');
    }
    
    function contactSupport() {
      showSystemNotification('Support', 'Hubungi customer service untuk bantuan lebih lanjut', 'info');
    }
    
    function retryPackageApplication() {
      showSystemNotification('Pengajuan Ulang', 'Siapkan data untuk pengajuan ulang paket', 'info');
    }
    
    // 15. Close modals when clicking outside
    document.querySelectorAll('[id^="modal"]').forEach(modal => {
      modal.addEventListener('click', function(e) {
        if (e.target === this) {
          closeModal(this.id);
        }
      });
    });
    
    // 16. Keyboard Shortcuts
    document.addEventListener('keydown', function(e) {
      // Ctrl+1 = Lock Form
      if (e.ctrlKey && e.key === '1') {
        e.preventDefault();
        showSection('sectionLock');
        showSystemNotification('Shortcut', 'Beralih ke form Penguncian Paket', 'info');
      }
      
      // Ctrl+2 = Reject Form
      if (e.ctrlKey && e.key === '2') {
        e.preventDefault();
        showSection('sectionReject');
        showSystemNotification('Shortcut', 'Beralih ke form Garansi Ditolak', 'info');
      }

      // Ctrl+3 = Loan Form
      if (e.ctrlKey && e.key === '3') {
        e.preventDefault();
        showSection('sectionLoan');
        showSystemNotification('Shortcut', 'Beralih ke form Pengajuan Pinjaman', 'info');
      }

      // Ctrl+4 = Withdrawal Form
      if (e.ctrlKey && e.key === '4') {
        e.preventDefault();
        showSection('sectionWithdrawal');
        showSystemNotification('Shortcut', 'Beralih ke form Perjanjian Penarikan', 'info');
      }
      
      // Ctrl+L = Process Lock
      if (e.ctrlKey && e.key === 'l') {
        e.preventDefault();
        document.getElementById('btnProcessLock').click();
      }
      
      // Ctrl+R = Process Reject
      if (e.ctrlKey && e.key === 'r') {
        e.preventDefault();
        document.getElementById('btnProcessReject').click();
      }

      // Ctrl+P = Process Loan
      if (e.ctrlKey && e.key === 'p') {
        e.preventDefault();
        document.getElementById('btnProcessLoan').click();
      }

      // Ctrl+W = Process Withdrawal
      if (e.ctrlKey && e.key === 'w') {
        e.preventDefault();
        document.getElementById('btnProcessWithdrawal').click();
      }
      
      // ESC = Close modal
      if (e.key === 'Escape') {
        closeModal('modalLoan');
        closeModal('modalWithdrawal');
      }
    });
    
    // 17. Load data on page load
    window.addEventListener('load', function() {
      // Update saved count
      updateSavedCount();
      
      // Set default date for withdrawal form
      const now = new Date();
      const options = { day: '2-digit', month: 'long', year: 'numeric' };
      const dateString = now.toLocaleDateString('id-ID', options);
      document.getElementById('withdrawalTanggal').value = `Jakarta, ${dateString}`;
      
      // Show welcome message
      setTimeout(() => {
        showSystemNotification('Sistem Siap', 'ASIANG Banking System siap digunakan', 'success');
      }, 1000);
      
      // Simulate system activity
      setInterval(() => {
        // Random system notifications
        const activities = [
          ['Sistem Aktif', 'Semua komponen beroperasi normal', 'success'],
          ['Auto Backup', 'Data tersimpan aman', 'save'],
          ['Monitoring', 'Sistem berjalan optimal', 'info']
        ];
        
        const randomActivity = activities[Math.floor(Math.random() * activities.length)];
        showSystemNotification(randomActivity[0], randomActivity[1], randomActivity[2]);
      }, 30000); // Every 30 seconds
    });
    
    // 18. Add CSS for progress animation
    const style = document.createElement('style');
    style.textContent = `
      @keyframes shrink {
        from { width: 100%; }
        to { width: 0%; }
      }
      
      @keyframes pulseGlow {
        0%, 100% { boxShadow: 0 0 20px rgba(16, 185, 129, 0.4); }
        50% { boxShadow: 0 0 40px rgba(16, 185, 129, 0.7); }
      }
    `;
    document.head.appendChild(style);
  </script>
</body>
</html>